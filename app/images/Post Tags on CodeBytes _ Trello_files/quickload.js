!function(){var e,a={};a.exports=e={},e.boardFieldsMinimal=["name","closed","dateLastActivity","dateLastView","idOrganization","prefs","shortLink","shortUrl","url"].join(","),e.boardFieldsFull=[e.boardFieldsMinimal,"desc","descData","invitations","invited","labelNames","memberships","pinned","powerUps","subscribed"].join(","),e.boardFieldsMinimalSubscribed=[e.boardFieldsMinimal,"subscribed"].join(","),e.memberFields=["fullName","initials","memberType","username","avatarHash","bio","bioData","confirmed","products","url"].join(","),e.memberFieldsStatus=[e.memberFields,"status"].join(","),e.organizationFieldsMinimal=["name","displayName","products","prefs","logoHash"].join(","),e.cardFieldsBulk=["badges","closed","dateLastActivity","desc","descData","due","idAttachmentCover","idList","idBoard","idMembers","idShort","idLabels","name","pos","shortUrl","shortLink","subscribed","url"].join(","),e.card={fields:"all",stickers:!0,attachments:!0},e.currentBoardMinimal={lists:"all",cards:"visible",card_attachments:"cover",card_stickers:!0,card_fields:[e.cardFieldsBulk,"labels"].join(","),card_checklists:"none",members:"all",member_fields:e.memberFieldsStatus,membersInvited:"all",membersInvited_fields:e.memberFields,checklists:"none",organization:!0,organization_fields:"name,displayName,desc,descData,url,website,prefs,memberships,logoHash,products",myPrefs:!0,fields:e.boardFieldsFull},e.memberBoards={boards:"open,starred",board_fields:e.boardFieldsMinimalSubscribed,boardStars:!0,boardsInvited:"all",boardsInvited_fields:e.boardFieldsMinimalSubscribed,board_organization:!0,board_organization_fields:e.organizationFieldsMinimal,credits:"invitation,promoCode",organizations:"all",organization_fields:e.organizationFieldsMinimal,organizationsInvited:"all",organizationsInvited_fields:e.organizationFieldsMinimal,paid_account:!0},e.memberHeader={channels:!0,notifications:"all",notifications_limit:5,notifications_display:!0,notification_memberCreator_fields:e.memberFields,organizations:"all",organization_paid_account:!0,organization_fields:"name,displayName",paid_account:!0,savedSearches:!0};var r,i,n,o,t,s,l;o=function(e){var a;try{return window.JSON.parse(e)}catch(r){return a=r,null}},r=function(e,a){var r;r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),r.open("GET",e,!0),r.onreadystatechange=function(){4===r.readyState&&(200!==r.status?a(r.responseText):a(null,o(r.responseText)))},r.send(null)},n=function(e,a){var r,i,n,o,t,s;for(null==a&&(a={}),r=[],i=/invite-token-[-a-f0-9]*=([^;]+)/g;null!=(o=null!=(s=i.exec(document.cookie))?s[1]:void 0);)r.push(unescape(o));return r.length>0&&(a.invitationTokens=r.join(",")),""+e+"?"+function(){var e;e=[];for(n in a)t=a[n],e.push(""+n+"="+encodeURIComponent(t));return e}().join("&")},s={},t=location.pathname.substr(1),i=location.hash,i=/^#[^\/]+/.test(i)?"/"+i.substr(1).replace(/^[\\\/\.]+/g,""):null,l={init:function(){l.verifyPushState()&&(l.preloads={},/token/.test(document.cookie)&&(l.preload(n("/1/Members/me",e.memberHeader)),l.preload(l.getDataUrl())))},verifyPushState:function(){var e;return e=window.history&&window.history.pushState&&!/android(\s)*[3-4]\.[0-1][^0-9]/i.test(navigator.userAgent),i&&e?(location.replace(i),!1):t.length>1&&!e?(location.replace("/#"+t),!1):!0},getDataUrl:function(){var a;return i&&(t=i),""===t?n("/1/Members/me",e.memberBoards):(a=/^board\/[^\/]+\/([^\/]+)/.exec(t))?l.getBoardDataUrl(a[1]):(a=/^b\/([^\/]+)/.exec(t))?l.getBoardDataUrl(a[1]):(a=/^c\/([^\/]+)/.exec(t))?l.getCardDataUrl(a[1]):!1},getBoardDataUrl:function(a){return n("/1/Boards/"+a,e.currentBoardMinimal)},getCardDataUrl:function(a){return n("/1/Cards/"+a,e.card)},preload:function(e){var a;e&&(a={isLoading:!0,callbacks:[],errorCallbacks:[],start:Date.now(),used:!1,url:e},l.preloads[e]=a,r(e,function(r,i){var n,o,t,s,d,c,u,m;if(a.isLoading=!1,r)for(a.errorMessage=r,u=a.errorCallbacks,t=0,d=u.length;d>t;t++)(o=u[t])(r);else{for(a.data=i,m=a.callbacks,s=0,c=m.length;c>s;s++)(n=m[s])(i);setTimeout(function(){return l.removePreload(e)},1e4)}}))},removePreload:function(e){var a,r,i,n;if(e in l.preloads){for(n=l.removeFns,r=0,i=n.length;i>r;r++)(a=n[r])(l._cleanPreload(l.preloads[e]));return delete l.preloads[e]}},_cleanPreload:function(e){var a,r,i,n,o;for(a={},o=["isLoading","start","used","url"],i=0,n=o.length;n>i;i++)r=o[i],a[r]=e[r];return a},removeFns:[],onRemove:function(e){return l.removeFns.push(e)},load:function(e,a,r){var i,n;return i=l.preloads[e],null!=i?(i.used=!0,i.isLoading?(i.callbacks.push(a),r&&i.errorCallbacks.push(r)):(null!=i.errorMessage||null==i.data?"function"==typeof r&&r(null!=(n=i.errorMessage)?n:"No data on quickload"):a(i.data),l.removePreload(e)),l._cleanPreload(i)):void $.ajax(e,{dataType:"json"}).success(a).error(function(e){return"function"==typeof r?r(e.responseText):void 0})}},l.init(),a.exports=window.QuickLoad=l}();