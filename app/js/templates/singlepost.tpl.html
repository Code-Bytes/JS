<div class="row">

  <div class="large-9 columns" role="content">
    <article>
      <h3><a href="#">{{ post.title }}</a></h3>


      <div>
        <img class="spAvatar" ng-src="{{ post.user.avatar }}">
        <a href="#/profile/{{ post.user.id }}">{{ post.user.username }}</a>
        <span ng-if="(post.created_at === post.updated_at)">{{ post.createdAtTime() }}</span>
        <span ng-if="(post.created_at !== post.updated_at)">{{ post.updatedAtTime() }} <em>(Updated)</em></span>
      </div>

      <br>

      <div class="row">
        <div class="large-10 columns">
          <p>{{ post.content }}</p>
        </div>
      </div>
    </article>

    <div ng-if="isCurrentUser()">
      <a href="#/edit/{{ post.id }}" class="button tiny radius">Edit</a>
      <a href="#" class="button tiny radius" ng-click="deletePost()">Delete</a>
    </div>

    <hr><br>

    <form class="addComm" ng-if="isLoggedIn()" name="commentForm"> <!-- Add Comment -->
      <textarea id="commentInput" ng-model="comment.content" placeholder="Add your comment"></textarea>
      <br>
      <a href="#" class="button tiny radius addcommentbtn" ng-click="addComment(comment)">Submit</a>
    </form> <!-- End Add Comment -->

    <div class="addComment" ng-if="!isLoggedIn()"> <!-- User Not Logged In - Comment Area -->
      <p><a href="#/login">Log in</a> through Github to start commenting!</p>
    </div> <!-- End User Not Logged In - Comment Area -->


    <div class="row feedcomment" ng-repeat="comment in comments">
      <div class="commentHead"> <!-- Comment Head -->
        <div class="commenterInfo">
          <img class="commentAvatar" ng-src="{{ comment.user.avatar }}"/>
          <a href="#/profile/{{ comment.user.id }}" class="postUser">{{ comment.user.username }}</a>
        </div>
        <div class="editOrDelete" ng-if="(comment.user.id === currentUserId) && isLoggedIn()">
          <span ng-click="editorEnabled=!editorEnabled"><i class="fa fa-pencil-square-o"></i></span>
          <span ng-click="deleteComment(comment.id, $index)"><i class="fa fa-minus-square-o"></i></span>
        </div>
      </div> <!-- End Comment Head -->

      <!-- Comment Content -->
      <p ng-hide="editorEnabled">{{ comment.content }}</p>

      <div ng-show="editorEnabled">
        <form class="editComm" name="commentForm"> <!-- Edit Comment -->
          <textarea ng-model="comment.content" value="{{ comment.content }}"></textarea>
          <br>
          <a href="#" class="button tiny radius editcommentbtn" ng-click="editComment(comment, comment.id)">Submit</a>
        </form> <!-- End Edit Comment -->
      </div>
      <!-- toggleForm() -->

      <a href="" class="button tiny radius addreplybtn" ng-click="showForm = !showForm"><i class="fa fa-reply"></i></a>

      <form class="large-12 columns addRep" ng-show="showForm" ng-if="isLoggedIn()" ng-submit="addReply(reply, comment.id)" name="replyForm"> <!-- Reply Form -->
        <textarea id="commentInput" ng-model="reply.content" placeholder="Got a reply?"></textarea>
        <br>
        <button class="tiny radius submitreplybtn">Submit</button>
      </form> <!-- End Reply Form -->
    </div>

  </div>


  <aside class="large-3 columns">
    <h5>Similar Posts:</h5>
    <ul class="side-nav" ng-repeat="post in posts">
      <li><a href="#/post/{{ post.id }}">{{ post.title }}</a></li>
      <li><span>Created: {{ post.created_at | date:'short' }}</span></li>
      <li><span>{{ post.user.username }}</span></li>
    </ul>
  </aside>
</div>
